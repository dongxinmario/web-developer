<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise.race</title>
  </head>
  <body>
    <script>
      // Promise.race([promise1,promise2]) : Promise
      /* function getData1() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log('第一条数据加载成功')
            // resolve('data1')
            reject('err')
          }, 500)
        })
      }
      function getData2() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log('第二条数据加载成功')
            resolve('data2')
          }, 1000)
        })
      }
      function getData3() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log('第三条数据加载成功')
            resolve('data3')
          }, 1000)
        })
      }
      let p = Promise.race([getData1(), getData2(), getData3()])
      p.then((data) => {
        console.log(data)
      },e=>{
        console.log(e)
      }) */
      // 不使用 Promise.race
      let flag=false
      function func(data){
        if(flag) return
        flag=true
        console.log(data)
      }
      function getData1(){
        setTimeout(() => {
          console.log('第一条数据加载成功')
          func({name:'小明'})
        }, 500);
      }
      function getData2(){
        setTimeout(() => {
          console.log('第二条数据加载成功')
          func({name:'小红'})
        }, 600);
      }
      getData1()
      getData2()
    </script>
  </body>
</html>
